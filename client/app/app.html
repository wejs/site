<link rel="import" href="../bower_components/polymer/polymer.html">
<!-- Paper, Iron and Platinum elements -->
<link rel="import" href="../bower_components/paper-styles/paper-styles-classes.html">
<link rel="import" href="../bower_components/iron-flex-layout/classes/iron-flex-layout.html">
<link rel="import" href="../bower_components/paper-drawer-panel/paper-drawer-panel.html">
<link rel="import" href="../bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/paper-menu/paper-menu.html">
<link rel="import" href="../bower_components/paper-material/paper-material.html">
<link rel="import" href="../bower_components/paper-item/paper-item.html">
<link rel="import" href="../bower_components/iron-selector/iron-selector.html">
<link rel="import" href="../bower_components/iron-pages/iron-pages.html">

<link rel="import" href="../bower_components/paper-toast/paper-toast.html">

<link rel="import" href="../bower_components/platinum-sw/platinum-sw-register.html">
<link rel="import" href="../bower_components/platinum-sw/platinum-sw-cache.html">

<link rel="import" href="./custom-elements/wejs-static-home-page/wejs-static-home-page.html">

<link rel="stylesheet" type="text/css" href="./styles/main.css">

<script src="./scripts/app.js"></script>

<!-- Configure your routes here -->
<link rel="import" href="routing.html">

<dom-module id="wejs-app">
  <template>
    <paper-drawer-panel id="paperDrawerPanel">
      <paper-header-panel drawer mode="waterfall">
        <!-- Drawer Toolbar -->
        <paper-toolbar id="drawerToolbar"></paper-toolbar>
        <!-- Drawer Content -->
        <ul class="nav nav-pills nav-stacked">
          <li><a data-route="home" href="/">
            <iron-icon icon="home"></iron-icon>
            <span>Home</span>
          </a></li>
          <li><a><iron-icon icon="info"></iron-icon> Documentation</a></li>
          <template is="dom-repeat" items="{{docMenu.links}}">
            <li>
            <a data-route="{{item.modelId}}" href="{{item.url}}">
              <iron-icon icon="chevron-right"></iron-icon>
              <span>{{item.title}}</span>
            </a>
            </li>
          </template>
        </ul>
      </paper-header-panel>
      <paper-header-panel main mode="waterfall">
        <!-- Main Toolbar -->
        <paper-toolbar id="mainToolbar">
          <button tabindex="1" id="paperToggle" paper-drawer-toggle>
            <iron-icon icon="menu" paper-drawer-toggle></iron-icon>
          </button>
          <!-- Application name -->
          <span class="appname flex paper-font-display1">
            <a class="navbar-brand" href="/">
              <img class="img-responsive navbar-logo" src="/public/plugin/we-core/files/images/logo-small.png">
              <span>{{config.appName}}</span>
            </a>
          </span>

          <!-- Toolbar icons -->
          <a target="_blank" href="https://twitter.com/we_js">
            <paper-icon-button src="/public/project/client/app/images/icons/twitter-icon-128x128.png"></paper-icon-button>
          </a>
          <a target="_blank" href="https://github.com/wejs/we">
            <paper-icon-button src="/public/project/client/app/images/icons/github_icon-128x128.png"></paper-icon-button>
          </a>
        </paper-toolbar>

        <!-- Main Content -->
        <div id="content"></div>

      </paper-header-panel>
    </paper-drawer-panel>

    <paper-toast id="caching-complete" duration="6000" text="Caching complete! This app will work offline.">
    </paper-toast>

    <!-- SW Test feature -->
    <!-- <platinum-sw-register id="appServiceWorker" auto-register clients-claim skip-waiting
      on-service-worker-error="error"
      on-service-worker-installed="displayInstalledSW">
      <template is="dom-if" if="{{docPreloadedPages}}">
        <platinum-sw-cache default-cache-strategy="networkFirst" precache="{{docPreloadedPages}}"></platinum-sw-cache>
      </template>
    </platinum-sw-register> -->

  </template>
</dom-module>

<script>
(function() {
  Polymer({ is: 'wejs-app',
    properties: {
      title: {
        type: String,
        value: ''
      }
    },

    ready: function() {
      this.config = WE_BOOTSTRAP_CONFIG;
    },

    // custom methods
    error: function(e) {
      console.error('errr>', e);
    },
    displayInstalledSW: function() {
      document.querySelector('#caching-complete').show();
    }
  });
})();
</script>
